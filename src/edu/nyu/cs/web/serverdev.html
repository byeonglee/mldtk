<html>
<head>
<title>Munin Development</title>
</head>

<body bgcolor="ffffff" text="000000"
 link="0000ff" alink="0000ff" vlink="000066">

<font face="arial,helvetica,sans-serif">

<h3>Munin Development</h3>

<!-- Quick links -->

<p />
<center>
[ <a href="#tools">Tools Used</a> |
  <a href="#env">Environment Variables</a> |
  <a href="#dir">Directory Hierarchy</a> |
  <a href="#configuration">Configuration</a> |
  <a href="#run">Running Munin</a> ]
</center>

</font>

<!--

     Tools
    =======

  -->

<p />
<table border=0 hspace=4 cellspacing=2 width="100%" cellpadding=3>
<tr bgcolor="#99ccff"><td width="100%"><nobr>
<font face="arial,helvetica,sans-serif"><b><big>
<a name="tools">Tools</a>
</big></b></font></nobr></td></tr></table>
<p />
<ul>
	<li>	Java 2 SDK (v 1.4). It is recommended 
		to use a Java version higher than 1.4.1, 
		since version 1.4.0 has many bugs in the NIO package.

		<p /><a href="http://java.sun.com/j2se/1.4.2/download.html">
		http://java.sun.com/j2se/1.4.2/download.html</a><p /> </li>

	<li> <i>Cygwin</i>. UNIX port used on Windows platforms. This
		software is used for building Munin (make, cp, rm) and
		for performance testing. Make sure you install the
		make and gcc packages under the "Devel" category.

		<p /><a href="http://www.cygwin.com/">
		http://www.cygwin.com/</a><p /> </li>

	
	<li>	<i>HTTPerf</i>.  A tool for measuring 
		Web Server Performance developed by David Mosberger.

		<p /><a href="http://www.hpl.hp.com/personal/David_Mosberger/httperf.html">
		http://www.hpl.hp.com/personal/David_Mosberger/httperf.html</a><p /> </li>
	
	
	<li>	<i>PerfAnal</i>. A performance analysis tool of your Java code.

		<p /><a href="http://developer.java.sun.com/developer/technicalArticles/GUI/perfanal/">
		http://developer.java.sun.com/developer/technicalArticles/GUI/perfanal/</a> 


		<p />As its name suggests, it will help you find some 
		pitfalls and bottlenecks you may encounter in your own code.<p /></li>

		
</ul>

<!--

     Environment Variables
    =======================

  -->

<p />
<table border=0 hspace=4 cellspacing=2 width="100%" cellpadding=3>
<tr bgcolor="#99ccff"><td width="100%"><nobr>
<font face="arial,helvetica,sans-serif"><b><big>
<a name="env">Environment Variables</a>
</big></b></font></nobr></td></tr></table>
<p />

<table border="0" cellspacing="0" cellpadding="5">
<tr>
<td><code>JAVA_HOME</code></td>
<td rowspan="10">&nbsp;&nbsp;&nbsp;</td>
<td>The JDK directory, e.g., <code>C:\jdk1.4.1</code>.</td>
</tr>
<tr>
<td><code>JAVA_DEV_ROOT</code></td>
<td>The root of the local directory hierarchy, e.g.,
<code>C:\rgrimm\java</code>.</td>
</tr>
<tr>
<td><code>CLASSPATH</code></td>
<td>The class path, e.g., <code>C:\java\classes</code>.</td>
</tr>
<tr>
<td><code>PATH_SEP</code></td>
<td>The path separator for the local operating system, e.g.,
"<code>;</code>" for Windows and "<code>:</code>" for Unix.</td>
</tr>
</table>

<br />A note on path segment separators: It is OK to use
'<code>\</code>' within environment variables on Windows, but all
paths in make files must use '<code>/</code>' as the path segment
separator.

<p />A note on white spaces in file or directory names: Some UNIX
utilities get confused by improperly escaped white spaces.  So, don't
use white space in file or directory names. For example, the following
path will not work:

<pre>
    C:\Documents and Settings\rgrimm\java
</pre>


<!--

     Directory Hierarchy
    =====================

  -->

<p />
<table border=0 hspace=4 cellspacing=2 width="100%" cellpadding=3>
<tr bgcolor="#99ccff"><td width="100%"><nobr>
<font face="arial,helvetica,sans-serif"><b><big>
<a name="dir">Directory Hierarchy</a>
</big></b></font></nobr></td></tr></table>
<p />

<table border="0" cellspacing="0" cellpadding="5">
<tr>
<td><code>java</code></td>
<td> </td>
<td rowspan="10">&nbsp;&nbsp;&nbsp;</td>
<td>The root of the development tree, including global make files.</td>
</tr>
<tr>
<td> </td>
<td><code>classes</code></td>
<td>Class files, using package name components for subdirectories.</td>
</tr>
<tr>
<td> </td>
<td><code>docs</code></td>
<td>The class documentation generated by <code>javadoc</code>.</td>
</tr>
<tr>
<td> </td>
<td><code>src</code></td>
<td>All source files, notably Java source files, using package
name components for subdirectories.</td>
</tr>
</table>



<!-- 

 Configuration

 -->

<p />
<table border=0 hspace=4 cellspacing=2 width="100%" cellpadding=3>
<tr bgcolor="#99ccff"><td width="100%"><nobr>
<font face="arial,helvetica,sans-serif"><b><big>
<a name="configuration">Configuration</a>
</big></b></font></nobr></td></tr></table>
<p />

The configuration file's name is "<code>munin.config</code>". It is a
regular Java properties file, with each line specifying the value of a
named property like this:

<pre>
    <i>property</i>=<i>value</i>
</pre>

<p />The following properties are recognized by Munin:
<p />
<table border="0" cellspacing="0" cellpadding="5">
<tr>
<td> </td>
<td><code>HttpPort</code></td>
<td>HTTP Port to which server will be associated.</td>
</tr>
<tr>
<td> </td>
<td><code>BufferSize</code></td>
<td>Default size of Byte Buffers (see  java.nio.Buffer and 
java.nio.ByteBuffer) that are used internally by this server.
</td>
</tr>
<tr>
<td> </td>
<td><code>PoolSize</code></td>
<td>Initial size of ByteBufferPool and RequestHandlerPool. 
(See edu.nyu.cs.web.ByteBufferPool and edu.nyu.cs.web.RequestHandlerPool).
</td>
</tr>
<tr>
<td> </td>
<td><code>InitPath</code></td>
<td>Path to server’s local storage directory.</td>
</tr>
<tr>
<td> </td>
<td><code>HTTP/1.0</code></td>
<td>A boolean that specifies whether this server will only handle requests 
according to HTTP 1.0 specification (will not handle persistent connections). 
</td>
</tr>
<tr>
<td> </td>
<td><code>/Mirror</code></td>
<td>Munin's configuration file contains special properties that start with forward slash. This mapping shows a 
relationship between resource name of a particular HTTP request to corresponding request handler that must be used 
to process this request. Value of this property is fully qualified name of a java class. For example, the following is
a mapping between resource name "/Mirror" and corresponding request handler "edu.nyu.cs.web.MirroringRequestHandler".
<pre>
/Mirror=edu.nyu.cs.web.MirroringRequestHandler
</pre>

</td>
</tr>
<tr>
<td> </td>
<td><code>/*</code></td>
<td>A fully qualified path to a default request handler class. 
In this verson of <code>Munin</code>, class <code>edu.nyu.cs.web.DefaultRequestHandler</code> is used as a default
request handler.
</td>
</tr>
</table>
<p />

<!-- 

  Running this server

-->
<p />
<table border=0 hspace=4 cellspacing=2 width="100%" cellpadding=3>
<tr bgcolor="#99ccff"><td width="100%"><nobr>
<font face="arial,helvetica,sans-serif"><b><big>
<a name="run">Running Munin</a>
</big></b></font></nobr></td></tr></table>
<p />

To compile your java source files, execute the following command:

<pre>
    $ make
</pre>

<p />To generate java documentation for your java source files, 
execute the following command:

<pre>
    $ make doc
</pre>

<p />To delete all previously generated files, 
execute the following command:

<pre>
    $ make clobber
</pre>

<p />To create java archive (jar) based on your java source files, 
execute the following command:

<pre>
    $ make munin
</pre>

<p />To start your server, execute the following command:

<pre>
    $ java edu/nyu/cs/web/Server
</pre>

<p />Note, <code>$</code> represents the command line prompt on UNIX.
If you are using Windows, the command line prompt should look
something like <code>C:\></code>.

<p />Another note, on older versions of Cygwin, the make command
should be followed by <b>--win32</b> argument. For example,
<pre>
    $ make --win32
</pre>




</body></html>
